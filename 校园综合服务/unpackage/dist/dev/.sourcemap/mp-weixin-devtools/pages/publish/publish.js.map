{"version":3,"names":["_toConsumableArray2","require","_objectSpread2","common_vendor","utils_config","maxFiles","_sfc_main","__name","setup","__props","currentTab","ref","currentIndex","itemName","fileList","pickLocation","pickMarker","selectedTime","today","markers","id","width","height","iconPath","latitude","longitude","polyline","points","claimMethod","contact","remarks","reward","rewardAmount","openid","isEditing","disableTab","onLoad","options","_a","u","index","getStorageSync","value","formatTime","time2","date","Date","offset","setHours","getHours","toISOString","replace","substring","d","getFullYear","getMonth","getDate","map","n","String","padStart","join","item","JSON","parse","decodeURIComponent","type","time","location","name","pts","length","last","onShow","clickTab","i","chooseMedia","showActionSheet","itemList","success","res","tapIndex","chooseImage","chooseVideo","count","_fileList$value","arr","tempFilePaths","p","url","forEach","f","uploadFileToServer","push","apply","tempFilePath","path","uploadFile","concat","config","baseURL","filePath","formData","_ref","data","statusCode","deleteFile","idx","splice","previewFile","previewImage","urls","filter","current","onDateChange","e","detail","handleLocationClick","navigateTo","eventChannel","emit","marker","submitForm","showToast","title","icon","base","payload","lostPath","request","method","header","_ref2","navigateBack","_ctx","_cache","a","tab","i0","t","b","c","o","$event","g","h","j","k","l","m","q","r","s","v","w","x","y","z","onRewardChange","arguments","A","B","C","D","E","MiniProgramPage","_export_sfc","wx","createPage"],"sources":["pages/publish/publish.js"],"sourcesContent":["\"use strict\";\nconst common_vendor = require(\"../../common/vendor.js\");\nconst utils_config = require(\"../../utils/config.js\");\nconst maxFiles = 3;\nconst _sfc_main = {\n  __name: \"publish\",\n  setup(__props) {\n    const currentTab = common_vendor.ref([\"拾取物品\", \"丢失物品\"]);\n    const currentIndex = common_vendor.ref(0);\n    const itemName = common_vendor.ref(\"\");\n    const fileList = common_vendor.ref([]);\n    const pickLocation = common_vendor.ref(\"\");\n    const pickMarker = common_vendor.ref(null);\n    const selectedTime = common_vendor.ref(\"\");\n    const today = common_vendor.ref(\"\");\n    const markers = common_vendor.ref([{\n      id: 1,\n      width: 25,\n      height: 25,\n      iconPath: \"/static/image/5.png\",\n      latitude: 0,\n      longitude: 0\n    }]);\n    const polyline = common_vendor.ref([{\n      points: []\n    }]);\n    const claimMethod = common_vendor.ref(\"\");\n    const contact = common_vendor.ref(\"\");\n    const remarks = common_vendor.ref(\"\");\n    const reward = common_vendor.ref(\"无\");\n    const rewardAmount = common_vendor.ref(\"\");\n    const openid = common_vendor.ref(\"\");\n    const isEditing = common_vendor.ref(false);\n    const id = common_vendor.ref(\"\");\n    const disableTab = common_vendor.ref(false);\n    common_vendor.onLoad((options) => {\n      var _a;\n      const u = common_vendor.index.getStorageSync(\"userInfo\") || {};\n      if (u.openid)\n        openid.value = u.openid;\n      function formatTime(time2) {\n        const date = new Date(time2);\n        const offset = 8;\n        date.setHours(date.getHours() + offset);\n        return date.toISOString().replace(\"T\", \" \").substring(0, 10);\n      }\n      const d = /* @__PURE__ */ new Date();\n      today.value = [d.getFullYear(), d.getMonth() + 1, d.getDate()].map((n) => String(n).padStart(2, \"0\")).join(\"-\");\n      if (options.item) {\n        disableTab.value = true;\n        isEditing.value = true;\n        const item = JSON.parse(decodeURIComponent(options.item));\n        currentIndex.value = item.type === \"丢失物品\" ? 1 : 0;\n        itemName.value = item.itemName;\n        fileList.value = item.fileList;\n        claimMethod.value = item.claimMethod;\n        contact.value = item.contact;\n        remarks.value = item.remarks;\n        selectedTime.value = formatTime(time);\n        id.value = item.id;\n        if (currentIndex.value === 0) {\n          pickMarker.value = item.location;\n          pickLocation.value = item.location.name || \"\";\n        } else {\n          polyline.value = item.location;\n          const pts = ((_a = item.location[0]) == null ? void 0 : _a.points) || [];\n          if (pts.length) {\n            const last = pts[pts.length - 1];\n            markers.value = [{\n              ...markers.value[0],\n              latitude: last.latitude,\n              longitude: last.longitude\n            }];\n          }\n          reward.value = item.reward;\n          rewardAmount.value = item.rewardAmount || \"\";\n        }\n      }\n    });\n    common_vendor.onShow(() => {\n    });\n    function clickTab(i) {\n      if (disableTab.value)\n        return;\n      currentIndex.value = i;\n      reward.value = \"无\";\n      rewardAmount.value = \"\";\n    }\n    function chooseMedia() {\n      common_vendor.index.showActionSheet({\n        itemList: [\"选择图片\", \"选择视频\"],\n        success(res) {\n          if (res.tapIndex === 0)\n            chooseImage();\n          else\n            chooseVideo();\n        }\n      });\n    }\n    function chooseImage() {\n      common_vendor.index.chooseImage({\n        count: maxFiles - fileList.value.length,\n        success(res) {\n          const arr = res.tempFilePaths.map((p) => ({\n            type: \"image\",\n            url: p\n          }));\n          arr.forEach((f) => uploadFileToServer(f.url, f.type));\n          fileList.value.push(...arr);\n        }\n      });\n    }\n    function chooseVideo() {\n      common_vendor.index.chooseVideo({\n        success(res) {\n          const f = {\n            type: \"video\",\n            url: res.tempFilePath\n          };\n          uploadFileToServer(f.url, f.type);\n          fileList.value.push(f);\n        }\n      });\n    }\n    function uploadFileToServer(path, type) {\n      common_vendor.index.uploadFile({\n        url: `${utils_config.config.baseURL}/upload`,\n        filePath: path,\n        name: \"file\",\n        formData: {\n          type\n        },\n        success({\n          data,\n          statusCode\n        }) {\n          const d = JSON.parse(data);\n          if (statusCode === 200 && d.url) {\n            fileList.value = fileList.value.map((f) => {\n              return f.url === path ? {\n                ...f,\n                url: d.url\n              } : f;\n            });\n          }\n        }\n      });\n    }\n    function deleteFile(idx) {\n      fileList.value.splice(idx, 1);\n    }\n    function previewFile(url) {\n      common_vendor.index.previewImage({\n        urls: fileList.value.filter((f) => f.type === \"image\").map((f) => f.url),\n        current: url\n      });\n    }\n    function onDateChange(e) {\n      selectedTime.value = e.detail.value;\n    }\n    function handleLocationClick() {\n      if (currentIndex.value === 0) {\n        common_vendor.index.navigateTo({\n          url: \"/pages/publish/selectPoint/selectPoint\",\n          success(res) {\n            res.eventChannel.emit(\"sendData\", {\n              marker: pickMarker.value,\n              location: pickLocation.value\n            });\n          }\n        });\n      } else {\n        common_vendor.index.navigateTo({\n          url: \"/pages/publish/simulatePath/simulatePath\",\n          success(res) {\n            res.eventChannel.emit(\"sendData2\", {\n              markers: markers.value,\n              polyline: polyline.value\n            });\n          }\n        });\n      }\n    }\n    function submitForm() {\n      if (!itemName.value || !fileList.value.length || !openid.value || !claimMethod.value || !contact.value || !selectedTime.value || currentIndex.value === 0 && !pickMarker.value || currentIndex.value === 1 && !polyline.value[0].points.length) {\n        common_vendor.index.showToast({\n          title: \"请填写完整信息\",\n          icon: \"none\"\n        });\n        return;\n      }\n      const base = {\n        openid: openid.value,\n        itemName: itemName.value,\n        fileList: fileList.value,\n        time: selectedTime.value,\n        claimMethod: claimMethod.value,\n        contact: contact.value,\n        remarks: remarks.value\n      };\n      let url, payload;\n      if (currentIndex.value === 0) {\n        url = isEditing.value ? `${utils_config.config.baseURL}/updateLostFound` : `${utils_config.config.baseURL}/pickRecord`;\n        payload = {\n          ...base,\n          pickLocation: pickMarker.value\n        };\n      } else {\n        url = isEditing.value ? `${utils_config.config.baseURL}/updateLostFound` : `${utils_config.config.baseURL}/lostRecord`;\n        payload = {\n          ...base,\n          lostPath: polyline.value,\n          reward: reward.value,\n          rewardAmount: reward === \"输入\" ? rewardAmount.value : \"\"\n        };\n      }\n      if (isEditing.value)\n        payload.id = id.value;\n      common_vendor.index.request({\n        url,\n        method: \"POST\",\n        data: payload,\n        header: {\n          \"content-type\": \"application/json\"\n        },\n        success({\n          statusCode,\n          data\n        }) {\n          if (statusCode === 200) {\n            common_vendor.index.showToast({\n              title: isEditing.value ? \"更新成功\" : \"发布成功\"\n            });\n            common_vendor.index.navigateBack();\n          } else {\n            common_vendor.index.showToast({\n              title: \"操作失败\",\n              icon: \"none\"\n            });\n          }\n        }\n      });\n    }\n    return (_ctx, _cache) => {\n      return common_vendor.e({\n        a: common_vendor.f(currentTab.value, (tab, i, i0) => {\n          return {\n            a: common_vendor.t(tab),\n            b: common_vendor.n({\n              \"tab-active\": currentIndex.value === i\n            }),\n            c: i,\n            d: common_vendor.o(($event) => clickTab(i), i)\n          };\n        }),\n        b: disableTab.value,\n        c: itemName.value,\n        d: common_vendor.o(($event) => itemName.value = $event.detail.value),\n        e: common_vendor.f(fileList.value, (f, idx, i0) => {\n          return common_vendor.e({\n            a: f.type === \"image\"\n          }, f.type === \"image\" ? {\n            b: f.url,\n            c: common_vendor.o(($event) => previewFile(f.url), idx)\n          } : {\n            d: f.url\n          }, {\n            e: common_vendor.o(($event) => deleteFile(idx), idx),\n            f: idx\n          });\n        }),\n        f: fileList.value.length < maxFiles\n      }, fileList.value.length < maxFiles ? {\n        g: common_vendor.o(chooseMedia)\n      } : {}, {\n        h: common_vendor.t(currentIndex.value === 0 ? \"拾取地点\" : \"丢失地点\"),\n        i: common_vendor.t(currentIndex.value === 0 ? pickMarker.value ? \"点击查看标记点\" : \"请在地图上选点\" : polyline.value[0].points.length > 0 ? \"点击查看模拟路径\" : \"请在地图上模拟路径\"),\n        j: common_vendor.o(handleLocationClick),\n        k: common_vendor.t(currentIndex.value === 0 ? \"拾取时间\" : \"丢失时间\"),\n        l: common_vendor.t(selectedTime.value || (currentIndex.value === 0 ? \"请选择拾取时间\" : \"请选择丢失时间\")),\n        m: today.value,\n        n: common_vendor.o(onDateChange),\n        o: claimMethod.value,\n        p: common_vendor.o(($event) => claimMethod.value = $event.detail.value),\n        q: contact.value,\n        r: common_vendor.o(($event) => contact.value = $event.detail.value),\n        s: remarks.value,\n        t: common_vendor.o(($event) => remarks.value = $event.detail.value),\n        v: currentIndex.value === 1\n      }, currentIndex.value === 1 ? common_vendor.e({\n        w: reward.value === \"无\",\n        x: reward.value === \"面议\",\n        y: reward.value === \"输入\",\n        z: common_vendor.o((...args) => _ctx.onRewardChange && _ctx.onRewardChange(...args)),\n        A: reward.value === \"输入\"\n      }, reward.value === \"输入\" ? {\n        B: rewardAmount.value,\n        C: common_vendor.o(($event) => rewardAmount.value = $event.detail.value)\n      } : {}) : {}, {\n        D: common_vendor.t(isEditing.value ? \"完成\" : \"发布\"),\n        E: common_vendor.o(submitForm)\n      });\n    };\n  }\n};\nconst MiniProgramPage = /* @__PURE__ */ common_vendor._export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-bfce3555\"]]);\nwx.createPage(MiniProgramPage);\n//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/publish/publish.js.map\n"],"mappings":"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"}