{"version":3,"names":["_createForOfIteratorHelper2","require","_toConsumableArray2","common_vendor","_sfc_main","__name","setup","__props","locationInterval","lastMotionTime","mapCtx","longitude","ref","latitude","markers","locationName","rotate","onMounted","checkLocationAuthorization","index","createMapContext","setBoundary","southwest","northeast","complete","res","__f__","eventChannel","getOpenerEventChannel","on","getClosestLocationName","marker","location","value","getSetting","success","authSetting","requestLocationAuthorization","startRealTimeLocation","startDirectionListener","showAuthorizationModal","authorize","scope","fail","showModal","title","content","confirmText","cancelText","confirm","openSetting","settingRes","showToast","icon","setInterval","getLocation","type","latitude2","longitude2","realTimeMarker","id","iconPath","width","height","existingMarkers","filter","concat","err","stopRealTimeLocation","startDeviceMotionListening","onDeviceMotionChange","now","Date","alpha","clearInterval","stopDeviceMotionListening","onMapTap","e","_e$detail","detail","manualMarker","setCurrentLocationMarker","result","request","url","data","key","get_poi","poi_options","status","pois","closestPoi","minDistance","Infinity","_iterator","_step","s","n","done","poi","distance","calculateDistance","lat","lng","f","locationName2","address","duration","message","lat1","lng1","lat2","lng2","radLat1","Math","PI","radLat2","deltaLat","deltaLng","earthRadius","a","sin","cos","c","atan2","sqrt","onUnmounted","onComplete","currentMarker","length","pages","getCurrentPages","prevPage","setData","navigateBack","delta","_ctx","_cache","b","d","o","t","g","wx","createPage"],"sources":["pages/publish/selectPoint/selectPoint.js"],"sourcesContent":["\"use strict\";\nconst common_vendor = require(\"../../../common/vendor.js\");\nconst _sfc_main = {\n  __name: \"selectPoint\",\n  setup(__props) {\n    let locationInterval = null;\n    let lastMotionTime = 0;\n    let mapCtx = null;\n    const longitude = common_vendor.ref(113.457244);\n    const latitude = common_vendor.ref(23.25904);\n    const markers = common_vendor.ref([]);\n    const locationName = common_vendor.ref(\"\");\n    const rotate = common_vendor.ref(0);\n    common_vendor.onMounted(() => {\n      checkLocationAuthorization();\n      mapCtx = common_vendor.index.createMapContext(\"myMap\");\n      mapCtx.setBoundary({\n        southwest: {\n          longitude: 113.453333,\n          latitude: 23.255863\n        },\n        //西南角经纬度\n        northeast: {\n          longitude: 113.46152,\n          latitude: 23.261935\n        },\n        //东北角经纬度\n        complete(res) {\n          common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:59\", \"setBoundary \", res);\n        }\n      });\n      const eventChannel = getOpenerEventChannel();\n      eventChannel.on(\"sendData\", (res) => {\n        getClosestLocationName(res.marker.latitude, res.marker.longitude);\n        common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:66\", \"接收到的数据111：\", res.marker, res.location);\n        if (res.marker == null) {\n          common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:68\", \"kongkongkkkkk\");\n          return;\n        }\n        markers.value = [res.marker];\n      });\n    });\n    const checkLocationAuthorization = () => {\n      common_vendor.index.getSetting({\n        success(res) {\n          if (res.authSetting[\"scope.userLocation\"] === void 0) {\n            requestLocationAuthorization();\n          } else if (res.authSetting[\"scope.userLocation\"]) {\n            startRealTimeLocation();\n            startDirectionListener();\n          } else {\n            showAuthorizationModal();\n          }\n        }\n      });\n    };\n    const requestLocationAuthorization = () => {\n      common_vendor.index.authorize({\n        scope: \"scope.userLocation\",\n        success() {\n          common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:99\", \"用户授权定位成功\");\n          startRealTimeLocation();\n          startDirectionListener();\n        },\n        fail() {\n          common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:105\", \"用户拒绝定位授权\");\n          showAuthorizationModal();\n        }\n      });\n    };\n    const showAuthorizationModal = () => {\n      common_vendor.index.showModal({\n        title: \"定位权限未开启\",\n        content: \"请在设置中开启定位权限，以使用实时定位功能\",\n        confirmText: \"去设置\",\n        cancelText: \"取消\",\n        success(res) {\n          if (res.confirm) {\n            common_vendor.index.openSetting({\n              success(settingRes) {\n                if (settingRes.authSetting[\"scope.userLocation\"]) {\n                  common_vendor.index.showToast({\n                    title: \"定位权限已开启\",\n                    icon: \"success\"\n                  });\n                  startRealTimeLocation();\n                  startDirectionListener();\n                } else {\n                  common_vendor.index.showToast({\n                    title: \"未开启定位权限\",\n                    icon: \"none\"\n                  });\n                }\n              }\n            });\n          } else {\n            common_vendor.index.showToast({\n              title: \"无法使用定位功能\",\n              icon: \"none\"\n            });\n          }\n        }\n      });\n    };\n    const startRealTimeLocation = () => {\n      locationInterval = setInterval(() => {\n        common_vendor.index.getLocation({\n          type: \"gcj02\",\n          // 返回适用于 map 组件的坐标\n          success(res) {\n            const { latitude: latitude2, longitude: longitude2 } = res;\n            common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:157\", latitude2, longitude2);\n            const realTimeMarker = {\n              id: 999,\n              latitude: latitude2,\n              longitude: longitude2,\n              iconPath: \"/static/8.png\",\n              // 图标路径\n              width: 16,\n              height: 16,\n              rotate: rotate.value\n              // 实时方向\n            };\n            const existingMarkers = markers.value.filter((marker) => marker.id !== 999);\n            markers.value = [realTimeMarker, ...existingMarkers];\n          },\n          fail(err) {\n            common_vendor.index.__f__(\"error\", \"at pages/publish/selectPoint/selectPoint.vue:175\", \"定位失败:\", err);\n            common_vendor.index.showToast({ title: \"获取定位失败\", icon: \"none\" });\n            stopRealTimeLocation();\n          }\n        });\n      }, 2e3);\n    };\n    const startDirectionListener = () => {\n      common_vendor.index.startDeviceMotionListening({\n        success: () => common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:186\", \"方向监听已开启\"),\n        fail: (err) => common_vendor.index.__f__(\"error\", \"at pages/publish/selectPoint/selectPoint.vue:187\", \"方向监听开启失败\", err)\n      });\n      common_vendor.index.onDeviceMotionChange((res) => {\n        const now = Date.now();\n        if (now - lastMotionTime > 1e3) {\n          lastMotionTime = now;\n          common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:196\", \"设备方向角度:\", res.alpha);\n          rotate.value = res.alpha || 0;\n        }\n      });\n    };\n    const stopRealTimeLocation = () => {\n      if (locationInterval) {\n        clearInterval(locationInterval);\n        locationInterval = null;\n      }\n      common_vendor.index.stopDeviceMotionListening();\n      common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:209\", \"实时定位已停止\");\n    };\n    const onMapTap = (e) => {\n      const { latitude: latitude2, longitude: longitude2 } = e.detail;\n      common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:215\", latitude2, longitude2, \"点击地图事件经纬度\");\n      const manualMarker = {\n        id: 0,\n        // 固定ID表示地图点击标记点\n        latitude: latitude2,\n        longitude: longitude2,\n        iconPath: \"/static/7.png\",\n        // 手动设置的标记点图标\n        width: 32,\n        height: 32,\n        title: \"选中位置\"\n      };\n      const existingMarkers = markers.value.filter((marker) => marker.id !== 0);\n      markers.value = [...existingMarkers, manualMarker];\n      getClosestLocationName(latitude2, longitude2);\n    };\n    const setCurrentLocationMarker = () => {\n      common_vendor.index.getLocation({\n        type: \"gcj02\",\n        success(res) {\n          const { latitude: latitude2, longitude: longitude2 } = res;\n          common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:241\", latitude2, longitude2, \"当前位置经纬度\");\n          const manualMarker = {\n            id: 0,\n            // 固定ID表示地图点击标记点\n            latitude: latitude2,\n            longitude: longitude2,\n            iconPath: \"/static/7.png\",\n            // 手动设置的标记点图标\n            width: 32,\n            height: 32,\n            title: \"选中位置\"\n          };\n          const existingMarkers = markers.value.filter((marker) => marker.id !== 0);\n          markers.value = [...existingMarkers, manualMarker];\n          getClosestLocationName(latitude2, longitude2);\n        },\n        fail(err) {\n          common_vendor.index.showModal({\n            title: \"无法获取位置\",\n            content: \"请在设置中开启定位权限，以标记当前位置\",\n            confirmText: \"去设置\",\n            cancelText: \"取消\",\n            success(result) {\n              if (result.confirm) {\n                common_vendor.index.openSetting({\n                  success(settingRes) {\n                    if (settingRes.authSetting[\"scope.userLocation\"]) {\n                      common_vendor.index.showToast({\n                        title: \"定位权限已开启\",\n                        icon: \"success\"\n                      });\n                      startRealTimeLocation();\n                      startDirectionListener();\n                    } else {\n                      common_vendor.index.showToast({\n                        title: \"未开启定位权限\",\n                        icon: \"none\"\n                      });\n                    }\n                  }\n                });\n              }\n            }\n          });\n        }\n      });\n    };\n    const getClosestLocationName = (latitude2, longitude2) => {\n      common_vendor.index.request({\n        url: \"https://apis.map.qq.com/ws/geocoder/v1/\",\n        data: {\n          location: `${latitude2},${longitude2}`,\n          key: \"YA2BZ-GNVWB-F4FUO-JGREH-NY5Q3-XLBG2\",\n          // 替换为你的腾讯地图 API Key\n          get_poi: 1,\n          // 返回POI数据\n          poi_options: \"radius=500;page_size=10\"\n          // 查询500米范围内最多10个POI\n        },\n        success(res) {\n          if (res.data.status === 0) {\n            const pois = res.data.result.pois;\n            let closestPoi = null;\n            let minDistance = Infinity;\n            common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:306\", pois);\n            for (let poi of pois) {\n              const distance = calculateDistance(\n                latitude2,\n                longitude2,\n                poi.location.lat,\n                poi.location.lng\n              );\n              if (distance < minDistance) {\n                minDistance = distance;\n                closestPoi = poi;\n              }\n            }\n            const locationName2 = closestPoi ? closestPoi.title : res.data.result.address;\n            locationName2.value = locationName2;\n            common_vendor.index.showToast({\n              title: \"最近地点: \" + locationName2,\n              icon: \"none\",\n              duration: 2e3\n            });\n          } else {\n            common_vendor.index.__f__(\"error\", \"at pages/publish/selectPoint/selectPoint.vue:331\", \"逆地址解析失败:\", res.data.message);\n            common_vendor.index.showToast({\n              title: \"地址获取失败\",\n              icon: \"error\"\n            });\n          }\n        },\n        fail(err) {\n          common_vendor.index.__f__(\"error\", \"at pages/publish/selectPoint/selectPoint.vue:339\", \"请求失败:\", err);\n          common_vendor.index.showToast({\n            title: \"网络错误，请稍后重试\",\n            icon: \"error\"\n          });\n        }\n      });\n    };\n    const calculateDistance = (lat1, lng1, lat2, lng2) => {\n      const radLat1 = Math.PI / 180 * lat1;\n      const radLat2 = Math.PI / 180 * lat2;\n      const deltaLat = radLat1 - radLat2;\n      const deltaLng = Math.PI / 180 * (lng1 - lng2);\n      const earthRadius = 6371e3;\n      const a = Math.sin(deltaLat / 2) * Math.sin(deltaLat / 2) + Math.cos(radLat1) * Math.cos(radLat2) * Math.sin(deltaLng / 2) * Math.sin(deltaLng / 2);\n      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      return earthRadius * c;\n    };\n    common_vendor.onUnmounted(() => {\n      stopRealTimeLocation();\n    });\n    const onComplete = () => {\n      let currentMarker;\n      if (markers.value.length === 1) {\n        currentMarker = markers.value[0];\n      } else {\n        currentMarker = markers.value[1];\n      }\n      const locationName2 = locationName2.value;\n      common_vendor.index.__f__(\"log\", \"at pages/publish/selectPoint/selectPoint.vue:380\", currentMarker, locationName2);\n      if (!locationName2) {\n        common_vendor.index.showToast({ title: \"未设置标记点\", icon: \"none\" });\n        return;\n      }\n      const pages = getCurrentPages();\n      const prevPage = pages[pages.length - 2];\n      prevPage.setData({\n        currentMarker,\n        locationName: locationName2\n      });\n      common_vendor.index.navigateBack({\n        delta: 1\n      });\n    };\n    return (_ctx, _cache) => {\n      return {\n        a: latitude.value,\n        b: longitude.value,\n        c: markers.value,\n        d: common_vendor.o(onMapTap),\n        e: common_vendor.t(locationName.value || \"未设置标记点\"),\n        f: common_vendor.o(setCurrentLocationMarker),\n        g: common_vendor.o(onComplete)\n      };\n    };\n  }\n};\nwx.createPage(_sfc_main);\n//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/publish/selectPoint/selectPoint.js.map\n"],"mappings":"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"}